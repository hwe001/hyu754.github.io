<!DOCTYPE html>

<html lang="en" style="height:100%">
    <head>
        <title>Simple Zinc WebGL Demo</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

        <style>
            body {
                font-family: Monospace;
                background-color: #000;
                color: #fff;
                margin: 0px;
                overflow: hidden;
            }
            #info {
                color: #fff;
                position: absolute;
                top: 10px;
                width: 100%;
                text-align: center;
                z-index: 100;
                display:block;
            }
            #info a, .button { color: #f00; font-weight: bold; text-decoration: underline; cursor: pointer }
        </style>
        <link rel="stylesheet" type="text/css" href="css/verticle_menu.css">
        <script type="text/javascript" src="js/verticle_menu.js"> </script>

        <script src="js/three.min.js"></script>
        <script src="js/zinc_threejs_control.js"></script>
        <script src="js/zinc_3js_renderer.js"></script>

    </head>

    <body style="height:100%">


        <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <p>Dummy text </p>   
            <p>Dummy text </p>   
            <p>Dummy text </p>   
            <p>Dummy text </p> 
            <div class="select">
                <label for="videoSource" >Video source: </label>
                <select id="videoSource"></select>
            </div>
        </div>

        <span onclick="openNav()" style="font-size:40px;">Menu</span>
        <!--
<button name="Reset View" value="OK" type="button" onclick="resetView()">Reset View</button>
<button name="View All" value="OK" type="button" onclick="viewAll()">View All</button>
<button name="Jaw" value="jaw" type="button" onclick="loadMyModel(this.value)">Jaw</button>
<button name="Beating Heart" value="beating_heart" type="button" onclick="loadMyModel(this.value)">Beating Heart</button>
<button name="foot" value="newfoot" type="button" onclick="loadMyModel(this.value)">Foot</button>
<button name="skin" value="skin" type="button" onclick="loadMyModel(this.value)">Skin</button>
<button name="materials" value="materials" type="button" onclick="loadMyModel(this.value)">materials</button>
<button name="deforming_heart" value="deforming_heart" type="button" onclick="loadMyModel(this.value)">Deforming heart</button>
<button name="liver surface" value = "liver_surface" type = "button" onclick="alert('model not loaded')">liver surface</button>

-->
        <!--Creating a selector for the video source-->


        <script src= "js/create_video.js"></script>
        <script>
            //*********************************//
            //   Create video texture and plane//
            //*********************************//
            //creates new texture for the plane
            var videoTexture = new THREE.Texture(video);
            var surface_material_video = new THREE.MeshBasicMaterial ({
                map : videoTexture
            });

            //create plane with video texture
            var geo = new THREE.PlaneGeometry(512, 512);
            //var mat = new THREE.MeshBasicMaterial({ color: 0x000000, side: THREE.DoubleSide });

            surface_material_video.depthTest = false;
            surface_material_video.depthWrite=false;
            var plane = new THREE.Mesh(geo, surface_material_video);
            plane.name="video_plane";
            plane.material.side=THREE.DoubleSide;



            //*****************************//
            //   ZINC GL initialization    //
            //*****************************//
            var currentModel = undefined;

            container = document.createElement( 'div' );
            document.body.appendChild( container );
            container.style.height = "100%"



            zincRenderer = new Zinc.Renderer(container, window);



            Zinc.defaultMaterialColor = 0xFFFF9C
            zincRenderer.initialiseVisualisation();
            loadMyModel("newfoot");
            //loadMyModel("skin");

            //alert(numbertest);


            //Loading the current scene
            var current_scene = zincRenderer.getCurrentScene();
            // current_scene.setStereoEffectEnable(true);
            //current_scene.loadFromViewURL("models/"+"newfoot");


            zincRenderer.addToScene(plane);

            zincRenderer.animate();

            //var scene2 = new THREE.Scene();


            function loadMyModel(model_name) {
                if (currentModel != model_name) {
                    var scene = zincRenderer.getSceneByName(model_name)

                    if (scene == undefined) {

                        //plane.material.side = THREE.DoubleSide;


                        scene = zincRenderer.createScene(model_name);

                        //scene.addObject(plane);
                        //var current_scene=zincRenderer.getCurrentScene();
                        //var scene_returned=new scene.getThreeJSScene();
                        //scene_returned.add(plane);
                        //scene_returned.add(plane);
                        scene.loadFromViewURL("models/"+model_name);

                        //zincRenderer.addToScene(plane);

                        //scene.hello_world();
                        //scene.loadFromViewURL("models/"+"newfoot");

                    } else {
                        // zincRenderer.addToScene(plane);
                        scene.resetView();
                        //   zincRenderer.getThreeJSScene();

                    }

                    //zincRenderer.addToScene(plane);
                    // zincRenderer.addToScene(plane);
                    zincRenderer.setCurrentScene(scene);
                    zincRenderer.addToScene(plane);
                }
            }

            function resetView()
            {
                zincRenderer.resetView();

            }

            function viewAll()
            {
                zincRenderer.viewAll();
            }

        </script>

    </body>
</html>
